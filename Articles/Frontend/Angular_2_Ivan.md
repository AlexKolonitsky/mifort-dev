# Angular 2


В этой статье рассмотрим архитектуру Angular 2 приложения и его основные компоненты. Все примеры кода будут на языке TypeScript.

Cписок всего, что приподносит нам Angular 2:


Модули
Компоненты
Шаблоны
Метаданные
Сервисы
Директивы
Dependency Injection
Data Binding.

Пойдём по порядку:


Модули
Если в  Angular 1 был паттерн проектирования MVC, то Angular 2 имеет модульную архитектуру. Любое Angular 2 приложение имеет хотя бы один модуль. Этот обязательный модуль, как правило,  называется корневым.

Для работы модуля (как и любой сущности Angular 2) необходим ряд библиотек. Подключение библиотек в Angular 2 осуществляется с помощью “фичи” ES6 import:


import { NgModule }  from '@angular/core';  // импорт ключевого декоратора
import { BrowserModule } from '@angular/platform-browser';
import { AppComponent }   from './app.component';
 


@NgModule({      // Описание декоратора
    imports:  	[ BrowserModule, FormsModule ],
    declarations: [ AppComponent ],
    bootstrap:	[ AppComponent ]
})
export class AppModule { }   // Экспорт класса Модуля

Для описания объекта декоратора могут применяться следующие поля:
declarations: классы представлений , которые принадлежат модулю. Angular 2 имеет три типа классов представлений: компоненты (components), директивы (directives), каналы (pipes)
exports: набор классов представлений, которые должны использоваться в шаблонах компонентов из других модулей
imports: другие модули, классы которых необходимы для шаблонов компонентов из текущего модуля
providers: классы, создающие сервисы, используемые модулем
bootstrap: корневой компонент, который вызывается по умолчанию при загрузке приложения


Для работы модулей, компонентов в Angular 2 приложения нужно иметь: импорт необходимых библиотек, функция-декоратора, класс на экспорт.

   2) Компоненты

Всё приложение на Angular 2  состоит только из компонентов, которые образуют древовидную иерархическую структуру. Корневой компонент загружается с помощью функции bootstrap на HTML-страницу (если используется браузер как целевая платформа). Все остальные компоненты помещаются внутрь корневого и образуют дерево компонентов.
Инициализация компонента такая же, как и для модулей, за исключением подключения других библиотек и применением другой функции-декоратора.
Напишем простой компонент на Angular 2:

import { Component } from '@angular/core';   // Импорт ключевого декоратора для компонентов
     @Component({   // Описание декоратора
    selector: 'my-app',
    template: `<label>Enter your name:</label>
                 <input [(ngModel)]="name" placeholder="name">
                 <h1>Hello {{name}}!</h1>`
  styleUrls: `components.css`
})
export class AppComponent {     // Экспорт класса декоратора
    name: " ";
}

В поле selector декоратора компонента указывается название тега, которое будет применяться для использования компонента в шаблоне.
В поле template указывается содержимое разметки. Здесь используется новая ‘фича’ ES6  - шаблонные строки. Вместо того, чтобы не писать разметку в файлу компонента, можно перенести разметку в отдельный файл с расширением html, и вместо поля template, использовать поле templateUrl и в значении указать путь к файлу.

В поле stylesUrls указывается путь к файлу со стилями, необходимые для данного компонента. Можно писать поле style, используя шаблонные строки, тогда поле называется style. Здесь нужно сказать, что все стили записанные, указанные в этом поле являются уникальными. Это обеспечивается тем, что Angular 2 “навешивает” на каждый html элемент, для которого указаны стили, специальный атрибут. Так что, беспокоится за уникальность стилей в Angular 2 не придется.Ну, и наконец, мы экспортируем сам класс компонента AppComponent.

  3) Шаблоны
Представлены как правило html файлами. В шаблонах могут применятся директивы и привязка данных к данным компонентов.

  4) Метаданные
В Angular 2 метаданные представлены классами-декораторами. Если говорить по-простому, то метаданные (а они же декораторы)  в Angular 2 нужны для того, чтобы описать класс, т.е. указать кем будет выступать данный класс (модулем, компонентом или директивой) и какие у него будут опции.

  5) Сервисы и внедрение зависимостей
В отличие от компонентов и директив сервисы не работают с представлениями, то есть с разметкой html, не оказывают на нее прямого влияния. Задачи, которые могут решать сервисы:
Предоставление данных приложению. Сервис может хранить данные либо же обращаться за данными к любому источнику(как правило, на сервер);
Сервис может представлять канал взаимодействия между отдельными компонентами приложения;
Сервис может инкапсулировать бизнес-логику, различные вычислительные задачи, задачи по логированию, которые лучше выносить из компонентов(т.к компоненты предназначены непосредственно для работе с представлением);

Файл сервиса представлен лишь классом на экспорт. Для использования сервиса в компоненте вот что необходимо сделать: 
Подключить сервис с помощью import;
Добавить сервис в коллекцию providers компонента
Использовать в конструкторе компонента(dependency injection). Например сервис DataService мы будем использовать следующим образом: constructor(private dataService: DataService){}


  6) Директивы
Суть директив по сравнению с AngularJs не поменялась: это все те же инструкции, которые применяются при рендеринге html-кода.
В Angular 2 есть три типа директив:
Компоненты - компонент по сути также является директивой, а декоратор @Component расширяет возможности декоратора @Directive с помощью добавления функционала по работе с шаблонами.
Атрибутивные - изменяют поведение уже существующего элемента. Например, ngStyle, ngClass ,ngModel.
Структурные - изменяют структуру DOM с помощью добавления, изменения или удаления элементов html.
Например, ngIf, ngFor.

Если же мы хотим создать свою директиву, нам придется выполнить всю ту последовательность действий, что и для создания компонента и модуля, применяя лишь свой класс-декоратор.


  6) Привязка данных
В Angular 2 есть четыре вида привязки данных: 
Привязка элемента DOM к значению компонента (односторонняя). В двойных фигурных скобках указывается выражение, к которому идет привязка: {{выражение}}.
<h1>Добро пожаловать {{name}}!</h1>
Привязка свойства элемента html к значению компонента (односторонняя).
<input type="text" [value]="name" />
Привязка метода компонента к событию в DOM(односторонняя).
<button (click)="addItem(text, price)">Добавить</button>
Двусторонняя привязка, когда элемент DOM привязан к значению на компоненте, при этом изменения на одном конце привязки сразу приводят к изменениям на другом конце.
<input [(ngModel)]="name" placeholder="name">
 
Подводя к итогу данную статью, 
На меня Angular 2 произвёл хорошее впечатление. Во-первых он проще для изучения по сравнению с AngularJs. Angular Js для написания приложения требовал знания очень многих своих компонентов(scope,service,directive,rootScope etc). В Angular 2 гораздо меньше таких компонентов языка. Во-вторых, Angular 2 быстрее. Понятное дело, что на малых проектах это не ощущается,
но чем больше приложений, тем это будет заметней. В-третьих, есть перспектива в написании мобильных и десктоп приложений.  


  















 
